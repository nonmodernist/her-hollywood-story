<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Redirecting...</title>
    <script>
        // For GitHub Pages SPA routing
        const path = window.location.pathname;
        
        // Debug logging
        console.log('404 handler - Current path:', path);
        
        // Check if we're on a database route
        if (path.includes('/database/')) {
            // Store the intended path for the SPA to handle
            sessionStorage.setItem('redirect', location.pathname + location.search);
            
            // For GitHub Pages, we need to handle the project path
            // The site is at /adapted-from-women/site/
            if (path.includes('/adapted-from-women/site/')) {
                // Extract everything after /site/
                const afterSite = path.split('/site/')[1];
                
                // If it's a database route, redirect to the database index
                if (afterSite && afterSite.startsWith('database/')) {
                    console.log('Redirecting to database index...');
                    window.location.replace('/adapted-from-women/site/database/');
                }
            } else {
                // Local development
                window.location.replace('/database/');
            }
        } else {
            // For non-database 404s, show actual 404 page
            document.title = 'Page Not Found - Her Hollywood Story';
            document.addEventListener('DOMContentLoaded', function() {
                // Determine the correct base path for links
                let basePath = '';
                if (location.pathname.includes('/adapted-from-women/site/')) {
                    basePath = '/adapted-from-women/site';
                }
                
                document.body.innerHTML = `
                    <style>
                        body {
                            font-family: 'EB Garamond', Georgia, serif;
                            max-width: 600px;
                            margin: 4rem auto;
                            padding: 0 2rem;
                            text-align: center;
                        }
                        h1 {
                            font-size: 3rem;
                            margin-bottom: 1rem;
                        }
                        p {
                            font-size: 1.3rem;
                            line-height: 1.8;
                            color: #666;
                        }
                        a {
                            color: #8b0000;
                            text-decoration: none;
                        }
                        a:hover {
                            text-decoration: underline;
                        }
                    </style>
                    <h1>Page Not Found</h1>
                    <p>The page you're looking for doesn't exist.</p>
                    <p><a href="${basePath}/">Return to Homepage</a> | <a href="${basePath}/database/">Browse Database</a></p>
                `;
            });
        }
    </script>
</head>
<body>
    <noscript>
        <h1>Page Not Found</h1>
        <p>The page you're looking for doesn't exist.</p>
        <p><a href="/">Return to Homepage</a></p>
    </noscript>
</body>
</html>
